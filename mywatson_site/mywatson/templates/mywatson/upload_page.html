{% extends 'mywatson/base.html' %}
{% load static %}

{% block title %}Upload photos{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'mywatson/base.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'mywatson/loading.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'mywatson/modal.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'mywatson/upload_page.css' %}" />
<link rel="stylesheet" type="text/css" href="{% static 'mywatson/assistance.css' %}" />



<!--
<form action="{% url 'mywatson:upload_photo' %}" method="post" enctype="multipart/form-data">
  {% csrf_token %}
  <input id="files" class="filestyle" type="file" name="images" multiple accept="image/*">
  <input type="submit" value="Upload" />

</form>

-->

<div class="assistance-btn">
	<img class="watson-img" src="{% static 'core/images/mywatson_logo.png' %}"/>
</div>
<div class="assistance-panel">
	<img class="watson-img" src="{% static 'core/images/mywatson_logo.png' %}"><b>Need assistance?</b></img>
	<p>This is where you <b>upload</b> your photos. You can either <b>click on the button</b> to select them...</p>
	<p>... or <b>drag-and-drop</b> them into the box. You can also drag-and-drop the <b>entire folder</b> at once!</p>
	<p>Please note that I cannot accept images bigger than 10MB. Sorry!</p>
	<p>After the images are done uploading, I try to label them according to their respective content. This may take a while, so thank you for your patience!</p>
</div>

<script src="{% static 'mywatson/assistance.js' %}"></script>


<div id="div-upload-wrapper">

    <!-- <button type="button" id="button-upload" class="btn js-upload-photos"> -->
	<button type="button" id="button-upload" class="btn btn-light js-upload-photos">
        <span class="ti-upload"></span> Choose photos...
    </button>


    <input id="fileupload" type="file" name="image" multiple accept="image/*"
           style="display: none;"
           data-url="{% url 'mywatson:upload_photo' %}"
           data-form-data='{"csrfmiddlewaretoken": "{{ csrf_token }}"}'>

    <div id="div-upload-drop" class="text-center">
	        <span class="ti-arrow-down" style="font-size: 4rem;"></span>
        <h3 class="drop-msg">... or drop them here to upload!</h3>
    </div>

    <div class="all-progress">

        <div id="wrapper-upload-progress">
            <span id="msg-upload" class="span-msg">Uploading</span>
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 0%;">0%</div>
            </div>
        </div>

        <div id="wrapper-tag-progress">
            <span id="msg-tagging" class="span-msg">Tagging</span>
            <!--<div class="loader"></div>-->
            <div class="loader sk-cube-grid">
                <div class="sk-cube sk-cube1"></div>
                <div class="sk-cube sk-cube2"></div>
                <div class="sk-cube sk-cube3"></div>
                <div class="sk-cube sk-cube4"></div>
                <div class="sk-cube sk-cube5"></div>
                <div class="sk-cube sk-cube6"></div>
                <div class="sk-cube sk-cube7"></div>
                <div class="sk-cube sk-cube8"></div>
                <div class="sk-cube sk-cube9"></div>
            </div>
            <span id="check-mark" class="ti-check"></span>
        </div>
    </div>

    <div class="div-errors">
    </div>

</div>


<div class="dim">
</div>

<div id="complete-modal" class="modal">
	<div class="modal-dialog">

	<!-- Modal content-->
		<div class="modal-content">

            <div class="modal-header">
    			<h4 class="modal-title"><span id="dialog-icon" class="ti-check"/></h4>
				<button type="button" class="close" data-dismiss="modal">&times;</button>
    		</div>
			<div class="modal-body">
				<p class="modal-body-text">Upload complete.<br>You can now see your photos in the gallery!</p>
			</div>
            <div class="modal-footer">
    			<button id="dialog-ok" type="button" class="confimation-dialog-btn btn btn-primary" data-dismiss="modal">Ok</button>
    		</div>

		</div>

	</div>
</div>


<script src="{% static 'mywatson/jquery-file-upload/jquery.ui.widget.js' %}"></script>
<script src="{% static 'mywatson/jquery-file-upload/jquery.iframe-transport.js' %}"></script>
<script src="{% static 'mywatson/jquery-file-upload/jquery.fileupload.js' %}"></script>
<script src="{% static 'mywatson/upload_page.js' %}"></script>

{% endblock %}
